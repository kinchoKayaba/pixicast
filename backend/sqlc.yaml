version: "2"
sql:
  - schema:
      # マイグレーションファイルからスキーマを読み込む
      - "sql/migrations/001_create_tables.sql"
      - "sql/migrations/002_seed_platforms.sql"
      - "sql/migrations/003_add_duration_to_events.sql"
      - "sql/migrations/004_add_is_favorite.sql"
      - "sql/migrations/005_create_users_and_plans.sql"
      - "sql/migrations/006_update_plan_limits.sql"
      - "sql/migrations/007_add_apple_podcast_url.sql"
      - "sql/migrations/008_add_source_priority.sql"
      - "sql/migrations/009_add_radiko_platform.sql"
      - "sql/migrations/010_add_podcast_platform.sql"
    queries:
      # クエリファイルを分割して管理
      - "sql/queries/query_sources.sql"
      - "sql/queries/query_subscriptions.sql"
      - "sql/queries/query_timeline.sql"
      - "sql/queries/query_users.sql"
      - "sql/queries/query_priority.sql"
    engine: "postgresql"
    gen:
      go:
        package: "db" # Goのパッケージ名
        out: "db" # backend/db フォルダに出力する
        sql_package: "pgx/v5" # 高速ドライバ pgx を使う設定
        emit_json_tags: true # JSONタグを生成
        emit_empty_slices: true # 空のスライスをnilではなく[]で返す
