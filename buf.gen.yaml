version: v1
plugins:
  # --- Backend (Go) ---
  - plugin: go
    out: backend/gen
    opt:
      - paths=import
      - module=github.com/kinchoKayaba/pixicast/backend/gen
  - plugin: connect-go
    out: backend/gen
    opt:
      - paths=import
      - module=github.com/kinchoKayaba/pixicast/backend/gen

  # --- Frontend (TypeScript) ---
  - plugin: es
    out: frontend/src/gen
    opt:
      - target=ts
      - import_extension=none
    path: frontend/node_modules/.bin/protoc-gen-es
  - plugin: connect-es
    out: frontend/src/gen
    opt:
      - target=ts
      - import_extension=none
    path: frontend/node_modules/.bin/protoc-gen-connect-es
